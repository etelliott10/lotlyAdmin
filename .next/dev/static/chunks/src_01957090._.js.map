{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/etelliott10/Desktop/lotly/lotlyAdmin/src/lib/api.ts"],"sourcesContent":["export const apiBaseUrl =\n  process.env.NEXT_PUBLIC_API_BASE ?? \"http://localhost:8000\";\n\nfunction handleAuthFailure(status: number) {\n  if (typeof window === \"undefined\") return;\n  if (status !== 401 && status !== 403) return;\n  sessionStorage.removeItem(\"lotly_admin_access_token\");\n  sessionStorage.removeItem(\"lotly_access_token\");\n  if (!window.location.pathname.startsWith(\"/login\")) {\n    window.location.href = \"/login\";\n  }\n}\n\nexport async function apiGet<TResponse>(path: string): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"GET\",\n    credentials: \"include\",\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n\nexport async function apiPost<TResponse>(\n  path: string,\n  payload: Record<string, unknown>,\n): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n\nexport async function apiPatch<TResponse>(\n  path: string,\n  payload: Record<string, unknown>,\n): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n"],"names":[],"mappings":";;;;;;;;;;AACE;AADK,MAAM,aACX,6DAAoC;AAEtC,SAAS,kBAAkB,MAAc;IACvC;;IACA,IAAI,WAAW,OAAO,WAAW,KAAK;IACtC,eAAe,UAAU,CAAC;IAC1B,eAAe,UAAU,CAAC;IAC1B,IAAI,CAAC,OAAO,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;QAClD,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;AACF;AAEO,eAAe,OAAkB,IAAY;IAClD,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,MAAM,EAAE;QACnD,QAAQ;QACR,aAAa;IACf;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,kBAAkB,SAAS,MAAM;IACnC;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,MAAM,OAAO,OAAQ,KAAK,KAAK,CAAC,QAA4C;IAE5E,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,UACJ,AAAC,QAAQ,YAAY,QAAQ,KAAK,MAAM,IACxC,CAAC,gBAAgB,EAAE,SAAS,MAAM,CAAC,CAAC,CAAC;QACvC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,QACpB,IAAY,EACZ,OAAgC;IAEhC,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,MAAM,EAAE;QACnD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,kBAAkB,SAAS,MAAM;IACnC;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,MAAM,OAAO,OAAQ,KAAK,KAAK,CAAC,QAA4C;IAE5E,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,UACJ,AAAC,QAAQ,YAAY,QAAQ,KAAK,MAAM,IACxC,CAAC,gBAAgB,EAAE,SAAS,MAAM,CAAC,CAAC,CAAC;QACvC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,SACpB,IAAY,EACZ,OAAgC;IAEhC,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,MAAM,EAAE;QACnD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,kBAAkB,SAAS,MAAM;IACnC;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,MAAM,OAAO,OAAQ,KAAK,KAAK,CAAC,QAA4C;IAE5E,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,UACJ,AAAC,QAAQ,YAAY,QAAQ,KAAK,MAAM,IACxC,CAAC,gBAAgB,EAAE,SAAS,MAAM,CAAC,CAAC,CAAC;QACvC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/section.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"actionButton\": \"section-module__zQf7-W__actionButton\",\n  \"actionRow\": \"section-module__zQf7-W__actionRow\",\n  \"adminList\": \"section-module__zQf7-W__adminList\",\n  \"adminRow\": \"section-module__zQf7-W__adminRow\",\n  \"header\": \"section-module__zQf7-W__header\",\n  \"inlineButton\": \"section-module__zQf7-W__inlineButton\",\n  \"modal\": \"section-module__zQf7-W__modal\",\n  \"modalActions\": \"section-module__zQf7-W__modalActions\",\n  \"modalBackdrop\": \"section-module__zQf7-W__modalBackdrop\",\n  \"modalDivider\": \"section-module__zQf7-W__modalDivider\",\n  \"modalForm\": \"section-module__zQf7-W__modalForm\",\n  \"modalGrid\": \"section-module__zQf7-W__modalGrid\",\n  \"modalHeader\": \"section-module__zQf7-W__modalHeader\",\n  \"modalInput\": \"section-module__zQf7-W__modalInput\",\n  \"modalLabel\": \"section-module__zQf7-W__modalLabel\",\n  \"modalPrimary\": \"section-module__zQf7-W__modalPrimary\",\n  \"modalSecondary\": \"section-module__zQf7-W__modalSecondary\",\n  \"modalSubtitle\": \"section-module__zQf7-W__modalSubtitle\",\n  \"modalTextarea\": \"section-module__zQf7-W__modalTextarea\",\n  \"page\": \"section-module__zQf7-W__page\",\n  \"panel\": \"section-module__zQf7-W__panel\",\n  \"panelBody\": \"section-module__zQf7-W__panelBody\",\n  \"panelGrid\": \"section-module__zQf7-W__panelGrid\",\n  \"panelTitle\": \"section-module__zQf7-W__panelTitle\",\n  \"passwordBox\": \"section-module__zQf7-W__passwordBox\",\n  \"resetButton\": \"section-module__zQf7-W__resetButton\",\n  \"subtitle\": \"section-module__zQf7-W__subtitle\",\n  \"title\": \"section-module__zQf7-W__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///Users/etelliott10/Desktop/lotly/lotlyAdmin/src/app/users/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { apiGet } from \"@/lib/api\";\nimport styles from \"../section.module.css\";\n\ntype LotlyAdmin = {\n  id: number;\n  user_id: number;\n  first_name?: string | null;\n  last_name?: string | null;\n  title?: string | null;\n  status?: string | null;\n};\n\ntype User = { id: number; email?: string | null };\n\nexport default function UsersPage() {\n  const [lotlyAdmins, setLotlyAdmins] = useState<LotlyAdmin[]>([]);\n  const [adminEmails, setAdminEmails] = useState<Record<number, string>>({});\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let isMounted = true;\n    Promise.all([\n      apiGet<LotlyAdmin[]>(\"/crud/lotly_admin\"),\n      apiGet<User[]>(\"/crud/user\"),\n    ])\n      .then(([lotlyAdmins, users]) => {\n        if (!isMounted) return;\n        const emailMap = new Map(users.map((row) => [row.id, row.email ?? \"\"]));\n        setAdminEmails(Object.fromEntries(emailMap.entries()));\n        setLotlyAdmins(lotlyAdmins);\n      })\n      .catch((err) => {\n        if (!isMounted) return;\n        setError(err instanceof Error ? err.message : \"Unable to load Lotly admins.\");\n      });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  return (\n    <section className={styles.page}>\n      <header className={styles.header}>\n        <div>\n          <h2 className={styles.title}>Users & Access</h2>\n          <p className={styles.subtitle}>\n            Control admin credentials, roles, and critical access policies across\n            every Lotly tenant.\n          </p>\n        </div>\n        <div className={styles.actionRow}>\n          <button className={styles.actionButton} type=\"button\">\n            Invite admin\n          </button>\n          <button className={styles.actionButton} type=\"button\">\n            Reset password\n          </button>\n          <button className={styles.actionButton} type=\"button\">\n            Export access log\n          </button>\n        </div>\n      </header>\n      {error && <p className={styles.subtitle}>{error}</p>}\n      {lotlyAdmins.length > 0 && (\n        <div className={styles.panelGrid}>\n          {lotlyAdmins.map((admin) => (\n            <div key={admin.id} className={styles.panel}>\n              <p className={styles.panelTitle}>\n                {admin.first_name || admin.last_name\n                  ? `${admin.first_name ?? \"\"} ${admin.last_name ?? \"\"}`.trim()\n                  : \"Lotly Admin\"}\n              </p>\n              <p className={styles.panelBody}>\n                {adminEmails[admin.user_id] ?? \"No email\"}\n              </p>\n              <p className={styles.panelBody}>Title: {admin.title ?? \"—\"}</p>\n              <p className={styles.panelBody}>Status: {admin.status ?? \"—\"}</p>\n            </div>\n          ))}\n        </div>\n      )}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBe,SAAS;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAe,EAAE;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAyB,CAAC;IACxE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,IAAA,0KAAS;+BAAC;YACR,IAAI,YAAY;YAChB,QAAQ,GAAG,CAAC;gBACV,IAAA,8HAAM,EAAe;gBACrB,IAAA,8HAAM,EAAS;aAChB,EACE,IAAI;uCAAC,CAAC,CAAC,aAAa,MAAM;oBACzB,IAAI,CAAC,WAAW;oBAChB,MAAM,WAAW,IAAI,IAAI,MAAM,GAAG;+CAAC,CAAC,MAAQ;gCAAC,IAAI,EAAE;gCAAE,IAAI,KAAK,IAAI;6BAAG;;oBACrE,eAAe,OAAO,WAAW,CAAC,SAAS,OAAO;oBAClD,eAAe;gBACjB;sCACC,KAAK;uCAAC,CAAC;oBACN,IAAI,CAAC,WAAW;oBAChB,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;gBAChD;;YACF;uCAAO;oBACL,YAAY;gBACd;;QACF;8BAAG,EAAE;IAEL,qBACE,6LAAC;QAAQ,WAAW,+IAAM,CAAC,IAAI;;0BAC7B,6LAAC;gBAAO,WAAW,+IAAM,CAAC,MAAM;;kCAC9B,6LAAC;;0CACC,6LAAC;gCAAG,WAAW,+IAAM,CAAC,KAAK;0CAAE;;;;;;0CAC7B,6LAAC;gCAAE,WAAW,+IAAM,CAAC,QAAQ;0CAAE;;;;;;;;;;;;kCAKjC,6LAAC;wBAAI,WAAW,+IAAM,CAAC,SAAS;;0CAC9B,6LAAC;gCAAO,WAAW,+IAAM,CAAC,YAAY;gCAAE,MAAK;0CAAS;;;;;;0CAGtD,6LAAC;gCAAO,WAAW,+IAAM,CAAC,YAAY;gCAAE,MAAK;0CAAS;;;;;;0CAGtD,6LAAC;gCAAO,WAAW,+IAAM,CAAC,YAAY;gCAAE,MAAK;0CAAS;;;;;;;;;;;;;;;;;;YAKzD,uBAAS,6LAAC;gBAAE,WAAW,+IAAM,CAAC,QAAQ;0BAAG;;;;;;YACzC,YAAY,MAAM,GAAG,mBACpB,6LAAC;gBAAI,WAAW,+IAAM,CAAC,SAAS;0BAC7B,YAAY,GAAG,CAAC,CAAC,sBAChB,6LAAC;wBAAmB,WAAW,+IAAM,CAAC,KAAK;;0CACzC,6LAAC;gCAAE,WAAW,+IAAM,CAAC,UAAU;0CAC5B,MAAM,UAAU,IAAI,MAAM,SAAS,GAChC,GAAG,MAAM,UAAU,IAAI,GAAG,CAAC,EAAE,MAAM,SAAS,IAAI,IAAI,CAAC,IAAI,KACzD;;;;;;0CAEN,6LAAC;gCAAE,WAAW,+IAAM,CAAC,SAAS;0CAC3B,WAAW,CAAC,MAAM,OAAO,CAAC,IAAI;;;;;;0CAEjC,6LAAC;gCAAE,WAAW,+IAAM,CAAC,SAAS;;oCAAE;oCAAQ,MAAM,KAAK,IAAI;;;;;;;0CACvD,6LAAC;gCAAE,WAAW,+IAAM,CAAC,SAAS;;oCAAE;oCAAS,MAAM,MAAM,IAAI;;;;;;;;uBAVjD,MAAM,EAAE;;;;;;;;;;;;;;;;AAiB9B;GArEwB;KAAA"}}]
}