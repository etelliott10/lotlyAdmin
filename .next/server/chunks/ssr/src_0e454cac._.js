module.exports=[19032,a=>{"use strict";let b="http://localhost:8000";function c(a){}async function d(a){let b=await a.text(),c=b?JSON.parse(b):null;if(!a.ok)throw Error(c&&"detail"in c&&c.detail||`Request failed (${a.status})`);return c}async function e(a){let e=await fetch(`${b}${a}`,{method:"GET",credentials:"include"});return e.ok||c(e.status),d(e)}async function f(a,e){let f=await fetch(`${b}${a}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});return f.ok||c(f.status),d(f)}async function g(a,e){let f=await fetch(`${b}${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});return f.ok||c(f.status),d(f)}a.s(["apiBaseUrl",0,b,"apiGet",()=>e,"apiPatch",()=>g,"apiPost",()=>f])},40618,a=>{a.v({card:"page-module__aydn6q__card",error:"page-module__aydn6q__error",form:"page-module__aydn6q__form",header:"page-module__aydn6q__header",input:"page-module__aydn6q__input",kicker:"page-module__aydn6q__kicker",label:"page-module__aydn6q__label",metaLabel:"page-module__aydn6q__metaLabel",metaRow:"page-module__aydn6q__metaRow",metaValue:"page-module__aydn6q__metaValue",mfaHint:"page-module__aydn6q__mfaHint",page:"page-module__aydn6q__page",primaryButton:"page-module__aydn6q__primaryButton",secondaryButton:"page-module__aydn6q__secondaryButton",subtitle:"page-module__aydn6q__subtitle",success:"page-module__aydn6q__success",token:"page-module__aydn6q__token"})},93482,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(19032),g=a.i(40618);function h(){let a=(0,e.useRouter)(),[h,i]=(0,c.useState)("login"),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("Lotly Admin Console"),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),z=a=>{sessionStorage.setItem("lotly_admin_access_token",a);let b="https:"===window.location.protocol;document.cookie=`lotly_admin_access_token=${a}; path=/; samesite=lax${b?"; secure":""}`},A=(0,c.useMemo)(()=>{if(!j.includes("@"))return j;let[a,b]=j.split("@");return`${a.slice(0,2)}***@${b}`},[j]),B=async b=>{b.preventDefault(),w(null),y(!0);try{let b=await (0,f.apiPost)("/lotly-admin/auth/login",{email:j,password:l,device_name:n||null});if(b.mfa_required){s(b.challenge_id??null),i("mfa"),y(!1);return}b.access_token&&(u(b.access_token),z(b.access_token),i("success"),a.push("/"))}catch(a){w(a instanceof Error?a.message:"Login failed.")}finally{y(!1)}},C=async b=>{b.preventDefault(),w(null),y(!0);try{if(!r)throw Error("Missing MFA challenge ID.");let b=await (0,f.apiPost)("/lotly-admin/auth/mfa/verify",{challenge_id:r,code:p});u(b.access_token),z(b.access_token),i("success"),a.push("/")}catch(a){w(a instanceof Error?a.message:"MFA verification failed.")}finally{y(!1)}};return(0,b.jsx)("div",{className:g.default.page,children:(0,b.jsxs)("main",{className:g.default.card,children:[(0,b.jsxs)("header",{className:g.default.header,children:[(0,b.jsx)("p",{className:g.default.kicker,children:"Lotly Admin"}),(0,b.jsx)("h1",{children:"Secure admin access"}),(0,b.jsx)("p",{className:g.default.subtitle,children:"Sign in to manage tenants, platform operations, and compliance across the Lotly network."})]}),(0,b.jsxs)("div",{className:g.default.metaRow,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:g.default.metaLabel,children:"API"}),(0,b.jsx)("p",{className:g.default.metaValue,children:f.apiBaseUrl})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:g.default.metaLabel,children:"Security"}),(0,b.jsx)("p",{className:g.default.metaValue,children:"MFA-ready sessions"})]})]}),"login"===h&&(0,b.jsxs)("form",{className:g.default.form,onSubmit:B,children:[(0,b.jsxs)("label",{className:g.default.label,children:["Email",(0,b.jsx)("input",{className:g.default.input,type:"email",name:"email",placeholder:"admin@lotly.com",value:j,onChange:a=>k(a.target.value),required:!0})]}),(0,b.jsxs)("label",{className:g.default.label,children:["Password",(0,b.jsx)("input",{className:g.default.input,type:"password",name:"password",placeholder:"••••••••",value:l,onChange:a=>m(a.target.value),required:!0})]}),(0,b.jsxs)("label",{className:g.default.label,children:["Device name",(0,b.jsx)("input",{className:g.default.input,type:"text",name:"device",placeholder:"Admin workstation",value:n,onChange:a=>o(a.target.value)})]}),v&&(0,b.jsx)("p",{className:g.default.error,children:v}),(0,b.jsx)("button",{className:g.default.primaryButton,type:"submit",disabled:x,children:x?"Signing in...":"Sign in"})]}),"mfa"===h&&(0,b.jsxs)("form",{className:g.default.form,onSubmit:C,children:[(0,b.jsxs)("p",{className:g.default.mfaHint,children:["Enter the 6-digit code for ",A||"your account","."]}),(0,b.jsxs)("label",{className:g.default.label,children:["MFA code",(0,b.jsx)("input",{className:g.default.input,type:"text",name:"mfa",inputMode:"numeric",autoComplete:"one-time-code",placeholder:"123456",value:p,onChange:a=>q(a.target.value),required:!0})]}),v&&(0,b.jsx)("p",{className:g.default.error,children:v}),(0,b.jsx)("button",{className:g.default.primaryButton,type:"submit",disabled:x,children:x?"Verifying...":"Verify"}),(0,b.jsx)("button",{className:g.default.secondaryButton,type:"button",onClick:()=>{i("login"),q(""),w(null)},children:"Back to login"})]}),"success"===h&&(0,b.jsxs)("div",{className:g.default.success,children:[(0,b.jsx)("h2",{children:"Login confirmed"}),(0,b.jsx)("p",{children:"Access token issued for admin API calls."}),(0,b.jsx)("div",{className:g.default.token,children:t||"Token unavailable"}),(0,b.jsx)(d.default,{className:g.default.primaryButton,href:"/",children:"Go to dashboard"})]})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_0e454cac._.js.map