{"version":3,"sources":["../../../../src/lib/api.ts","turbopack:///[project]/src/app/section.module.css [app-ssr] (css module)"],"sourcesContent":["export const apiBaseUrl =\n  process.env.NEXT_PUBLIC_API_BASE ?? \"http://localhost:8000\";\n\nfunction handleAuthFailure(status: number) {\n  if (typeof window === \"undefined\") return;\n  if (status !== 401 && status !== 403) return;\n  sessionStorage.removeItem(\"lotly_admin_access_token\");\n  sessionStorage.removeItem(\"lotly_access_token\");\n  if (!window.location.pathname.startsWith(\"/login\")) {\n    window.location.href = \"/login\";\n  }\n}\n\nexport async function apiGet<TResponse>(path: string): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"GET\",\n    credentials: \"include\",\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n\nexport async function apiPost<TResponse>(\n  path: string,\n  payload: Record<string, unknown>,\n): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n\nexport async function apiPatch<TResponse>(\n  path: string,\n  payload: Record<string, unknown>,\n): Promise<TResponse> {\n  const response = await fetch(`${apiBaseUrl}${path}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify(payload),\n  });\n\n  if (!response.ok) {\n    handleAuthFailure(response.status);\n  }\n\n  const text = await response.text();\n  const data = text ? (JSON.parse(text) as TResponse & { detail?: string }) : null;\n\n  if (!response.ok) {\n    const message =\n      (data && \"detail\" in data && data.detail) ||\n      `Request failed (${response.status})`;\n    throw new Error(message);\n  }\n\n  return data as TResponse;\n}\n","__turbopack_context__.v({\n  \"actionButton\": \"section-module__zQf7-W__actionButton\",\n  \"actionRow\": \"section-module__zQf7-W__actionRow\",\n  \"adminList\": \"section-module__zQf7-W__adminList\",\n  \"adminRow\": \"section-module__zQf7-W__adminRow\",\n  \"header\": \"section-module__zQf7-W__header\",\n  \"inlineButton\": \"section-module__zQf7-W__inlineButton\",\n  \"modal\": \"section-module__zQf7-W__modal\",\n  \"modalActions\": \"section-module__zQf7-W__modalActions\",\n  \"modalBackdrop\": \"section-module__zQf7-W__modalBackdrop\",\n  \"modalDivider\": \"section-module__zQf7-W__modalDivider\",\n  \"modalForm\": \"section-module__zQf7-W__modalForm\",\n  \"modalGrid\": \"section-module__zQf7-W__modalGrid\",\n  \"modalHeader\": \"section-module__zQf7-W__modalHeader\",\n  \"modalInput\": \"section-module__zQf7-W__modalInput\",\n  \"modalLabel\": \"section-module__zQf7-W__modalLabel\",\n  \"modalPrimary\": \"section-module__zQf7-W__modalPrimary\",\n  \"modalSecondary\": \"section-module__zQf7-W__modalSecondary\",\n  \"modalSubtitle\": \"section-module__zQf7-W__modalSubtitle\",\n  \"modalTextarea\": \"section-module__zQf7-W__modalTextarea\",\n  \"page\": \"section-module__zQf7-W__page\",\n  \"panel\": \"section-module__zQf7-W__panel\",\n  \"panelBody\": \"section-module__zQf7-W__panelBody\",\n  \"panelGrid\": \"section-module__zQf7-W__panelGrid\",\n  \"panelTitle\": \"section-module__zQf7-W__panelTitle\",\n  \"passwordBox\": \"section-module__zQf7-W__passwordBox\",\n  \"resetButton\": \"section-module__zQf7-W__resetButton\",\n  \"subtitle\": \"section-module__zQf7-W__subtitle\",\n  \"title\": \"section-module__zQf7-W__title\",\n});\n"],"names":[],"mappings":"uCAAO,IAAM,EACX,WAAA,aAEF,IAFsC,KAE7B,EAAkB,CAAc,EAQzC,CAEO,eAAe,EAAkB,CAAY,EAClD,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAA,EAAa,EAAA,CAAM,CAAE,CACnD,OAAQ,MACR,YAAa,SACf,EAEI,CAAC,EAAS,EAAE,EAAE,AAChB,EAAkB,EAAS,MAAM,EAGnC,IAAM,EAAO,MAAM,EAAS,IAAI,GAC1B,EAAO,EAAQ,KAAK,KAAK,CAAC,GAA4C,KAE5E,GAAI,CAAC,EAAS,EAAE,CAId,CAJgB,KAIV,AAAI,MAFP,AAEa,GAFL,WAAY,GAAQ,EAAK,MAAM,EACxC,CAAC,gBAAgB,EAAE,EAAS,MAAM,CAAC,CAAC,CAAC,EAIzC,OAAO,CACT,CAEO,eAAe,EACpB,CAAY,CACZ,CAAgC,EAEhC,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAA,EAAa,EAAA,CAAM,CAAE,CACnD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,YAAa,UACb,KAAM,KAAK,SAAS,CAAC,EACvB,EAEI,CAAC,EAAS,EAAE,EACd,AADgB,EACE,EAAS,MAAM,EAGnC,IAAM,EAAO,MAAM,EAAS,IAAI,GAC1B,EAAO,EAAQ,KAAK,KAAK,CAAC,GAA4C,KAE5E,GAAI,CAAC,EAAS,EAAE,CAId,CAJgB,KAIV,AAAI,MAFP,AAEa,GAFL,WAAY,GAAQ,EAAK,MAAM,EACxC,CAAC,gBAAgB,EAAE,EAAS,MAAM,CAAC,CAAC,CAAC,EAIzC,OAAO,CACT,CAEO,eAAe,EACpB,CAAY,CACZ,CAAgC,EAEhC,IAAM,EAAW,MAAM,MAAM,CAAA,EAAG,EAAA,EAAa,EAAA,CAAM,CAAE,CACnD,OAAQ,QACR,QAAS,CACP,eAAgB,kBAClB,EACA,YAAa,UACb,KAAM,KAAK,SAAS,CAAC,EACvB,EAEI,CAAC,EAAS,EAAE,EAAE,AAChB,EAAkB,EAAS,MAAM,EAGnC,IAAM,EAAO,MAAM,EAAS,IAAI,GAC1B,EAAO,EAAQ,KAAK,KAAK,CAAC,GAA4C,KAE5E,GAAI,CAAC,EAAS,EAAE,CAId,CAJgB,KAIV,AAAI,MAAM,AAFb,GAAQ,WAAY,GAAQ,EAAK,MAAM,EACxC,CAAC,gBAAgB,EAAE,EAAS,MAAM,CAAC,CAAC,CAAC,EAIzC,OAAO,CACT,oFC9FA,EAAA,CAAA,CAAA,CACA,aAAA,uCACA,UAAA,oCACA,UAAA,oCACA,SAAA,mCACA,OAAA,iCACA,aAAA,uCACA,MAAA,gCACA,aAAA,uCACA,cAAA,wCACA,aAAA,uCACA,UAAA,oCACA,UAAA,oCACA,YAAA,sCACA,WAAA,qCACA,WAAA,qCACA,aAAA,uCACA,eAAA,yCACA,cAAA,wCACA,cAAA,wCACA,KAAA,+BACA,MAAA,gCACA,UAAA,oCACA,UAAA,oCACA,WAAA,qCACA,YAAA,sCACA,YAAA,sCACA,SAAA,mCACA,MAAA,+BACA"}